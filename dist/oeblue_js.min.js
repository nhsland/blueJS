Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);const bluejay=(function(){"use strict";const e={};return console.time("[bluejay] Ready"),console.time("[bluejay] DOM Loaded"),e.extend=((t,a)=>{if("function"!=typeof a)throw new TypeError("[bluejay] [app.js] - only extend with a function: "+t);if(a._bj||t in e)throw new TypeError("[bluejay] [app.js] - already extended with: "+t);e[t]=a,a._bj=!0}),e.log=(e=>{console.log("[bluejay] "+e)}),e.ready=(()=>{console.timeEnd("[bluejay] Ready")}),e.log("OE JS UI layer [bluejay] ..."),e.log("DEBUG MODE"),e.log("Mustache version: "+Mustache.version),document.addEventListener("DOMContentLoaded",()=>{e.log("[Modules] - "+e.registeredModules()),console.timeEnd("[bluejay] DOM Loaded")},{once:!0}),e})();!(function(e){"use strict";const t=new Map,a=new Map,o=new Map,s=new Set,n=(e,t,a)=>{if(e.has(t))throw new TypeError("DOM Events: selector already added : "+t);e.set(t,a)},l=(e,t)=>{const a=e.target;if(a===document)return!1;t.forEach((t,o)=>{a.matches(o)&&t(e)})},r=(()=>{let e=0;return{delay:()=>{clearTimeout(e),e=setTimeout(()=>{s.forEach(e=>{e()})},150)}}})();function i(e){l(e,a)}function d(e){l(e,t)}function c(e){l(e,o)}let y=e=>{document.removeEventListener("mouseenter",i,{capture:!0}),document.removeEventListener("mousedown",d,{capture:!0}),document.removeEventListener("mouseleave",c,{capture:!0}),l(e,t),y=(e=>{l(e,t)})};document.addEventListener("mouseenter",i,{capture:!0}),document.addEventListener("mousedown",d,{capture:!0}),document.addEventListener("mouseleave",c,{capture:!0}),document.addEventListener("touchstart",e=>y(e),{capture:!0}),window.onresize=(()=>r.delay()),e.extend("userEnter",(e,t)=>n(a,e,t)),e.extend("userDown",(e,a)=>n(t,e,a)),e.extend("userLeave",(e,t)=>n(o,e,t)),e.extend("listenForResize",e=>s.add(e))})(bluejay),(function(e){"use strict";const t=(function*(){let e=10;for(;;)yield++e})(),a=()=>t.next().value;function o(){this.map=new Map,this.dataAttr="data-oebjk"}e.extend("getKey",a),o.prototype.add=function(e,t){const o=a();return this.map.set(o,e),t.setAttribute(this.dataAttr,o),o},o.prototype.getKey=function(e){let t=e.getAttribute(this.dataAttr);return null!==t&&""!=t&&t},o.prototype.get=function(e){return"string"==typeof e&&(e=parseInt(e,10)),this.map.get(e)},o.prototype.has=function(e){return this.map.has(e)},e.extend("Collection",o)})(bluejay),(function(e){"use strict";bluejay.extend("customEvent",(e,t)=>{bluejay.log('[Custom Event] - "'+e+'"');const a=new CustomEvent(e,{detail:t});document.dispatchEvent(a)})})(),(function(e){"use strict";e.extend("nodeArray",e=>Array.prototype.slice.call(e)),e.extend("appendTo",(e,t,a)=>{(a||document).querySelector(e).appendChild(t)}),e.extend("getParent",(e,t)=>{for(;!e.matches("body");){if(e.matches(t))return e;e=e.parentNode}return!1}),e.extend("removeElement",e=>{e.parentNode.removeChild(e)}),e.extend("show",(e,t="")=>{null!==e&&(e.style.display=t)}),e.extend("reshow",e=>{null!==e&&(e.style.display="")}),e.extend("hide",e=>{null!==e&&(e.style.display="none")}),e.extend("xhr",t=>(e.log("[XHR] - "+t),new Promise((a,o)=>{let s=new XMLHttpRequest;s.open("GET",t),s.onreadystatechange=function(){4===s.readyState&&(s.status>=200&&s.status<300?(e.log("[XHR] - Success"),a(s.responseText)):(e.log("[XHR] - Failed"),o(this.status+" "+this.statusText)))},s.send()}))),e.extend("getHiddenElemSize",e=>{e.style.visibility="hidden",e.style.display="";let t={w:e.offsetWidth,h:e.offsetHeight};return e.style.visibility="inherit",e.style.display="none",t}),e.extend("idgReporter",e=>{let t="idg-js-ui-message-out",a=document.getElementById(t),o=document.createElement("li");null===a&&((a=document.createElement("ul")).id=t,a.style="position:fixed; bottom:10px; right:10px; z-index:9999; background:orange; padding:10px; list-style-position:inside; max-height:vh90; overflow-y: scroll; font-size:14px;",document.body.appendChild(a));let s=a.children.length;o.appendChild(document.createTextNode(s+" - "+e)),a.appendChild(o)})})(bluejay),(function(e){"use strict";const t=[],a=new Map;e.extend("addModule",e=>t.push(e)),e.extend("registeredModules",()=>(t.sort(),t.join(", "))),e.extend("namespace",e=>(a.has(e)||a.set(e,{}),a.get(e)))})(bluejay),(function(e){"use strict";const t={list:new Set,add(e){return this.list.add(e),this.list.has(e)},remove(e){this.list.remove(e)},size(){return this.list.size},notify(){let e=this.list.values();for(let t of e)t()}};e.extend("ModelViews",()=>({views:Object.create(t)}))})(bluejay),(function(e){"use strict";const t=(e=!1)=>{return"data-"+(e?"bluejay-"+e:"bluejay")};e.extend("settings",t=>{switch(t){case"cssHeaderHeight":return 60;case"cssExtended":return 1440;case"cssHotlistFixed":return 1890;case"idgPHPLoadURL":return"/idg-php/v3/_load/";default:return e.log("Setting request not recognised: "+t),null}}),e.extend("getDataAttributeName",t),e.extend("setDataAttr",(e,a)=>{e.setAttribute(t(),a)}),e.extend("getDataAttr",e=>{const a=t();return!!e.hasAttribute(a)&&e.getAttribute(a)})})(bluejay);const oePlotly=(function(e){"use strict";e.log("Plot.ly version: "+Plotly.version),e.log("oePlotly - Plot.ly layout builder");const t={dark:{blue:"#63d7d6",green:"#65d235",greenSeries:["#65d235","#A5D712","#36be8d","#02B546"],red:"#ea2b34",redSeries:["#ea2b34","#F65B20","#D41C50","#D44304"],standard:["#1451b3","#175ece","#1a69e5"],varied:["#0a83ea","#18949f","#781cea","#3f0aea"],dual:["#3f0aea","#7b3131"]},light:{blue:"#00f",green:"#418c20",greenSeries:["#418c20","#708017","#147019","#667D3C"],red:"#da3e43",redSeries:["#da3e43","#AB274A","#BA4B2B","#AB2C22"],standard:["#0a4198","#1451b3","#175ece"],varied:["#0a2aea","#ea0a8e","#00b827","#890aea"],dual:["#0a4198","#874e4e"]}};return{isDarkTheme:()=>"dark"===window.oeThemeMode,getBlue:e=>e?t.dark.blue:t.light.blue,getColorSeries:(e,a)=>{let o=null;switch(e){case"varied":o=a?t.dark.varied:t.light.varied;break;case"twoPosNeg":o=a?t.dark.dual:t.light.dual;break;case"rightEye":o=a?t.dark.greenSeries:t.light.greenSeries;break;case"leftEye":o=a?t.dark.redSeries:t.light.redSeries;break;default:o=a?t.dark.standard:t.light.standard}return o},getColorFor:(e,a)=>{switch(e){case"rightEye":return a?t.dark.green:t.light.green;case"leftEye":return a?t.dark.red:t.light.red;case"error_y":return a?"#5b6c77":"#7da7cb";default:return"pink"}}}})(bluejay);!(function(e){"use strict";e.findRegression=function(e,t){let a=0,o=0,s=0,n=0,l=0,r=0,i=0,d=e.length;if(d!=t.length)throw new Error("The parameters values_x and values_y need to have same size!");if(0===d)return[[],[]];for(let c=0;c<d;c++)a+=r=e[c],o+=i=t[c],n+=r*r,s+=r*i,l++;const c=(l*s-a*o)/(l*n-a*a),y=o/l-c*a/l;let u=[],p=[];for(let t=0;t<d;t++)i=(r=e[t])*c+y,u.push(parseFloat(Number.parseFloat(r).toFixed(2))),p.push(parseFloat(Number.parseFloat(i).toFixed(2)));return{x:u,y:p}}})(oePlotly),(function(e){"use strict";e.getAxis=function(e,t){let a={linecolor:t?"#666":"#999",linewidth:1,showgrid:!0,gridcolor:t?"#292929":"#e6e6e6",tickmode:"auto",nticks:20,ticks:"outside",ticklen:3,tickcolor:t?"#666":"#ccc",automargin:!0,mirror:!0,connectgaps:!1};const o="y"==e.type;if(e.noMirrorLines&&(a.mirror=!1),e.domain&&o&&(a.domain=e.domain),e.title&&(a.title={text:e.title,standoff:o?10:20,font:{size:12}}),e.rightSide&&o&&(a.overlaying=e.rightSide,a.side="right",a.showgrid=!1,a.zeroline=!1,a.title.standoff=15),e.numTicks&&(a.nticks=e.numTicks),e.useDates&&(a.tickformat="%b %Y"),e.fixRange&&(a.fixedrange=!0),e.range&&(a.range=e.range),e.axisType&&(a.type=e.axisType),e.useCategories){let t=e.useCategories.categoryarray;a.type="category",a.categoryarray=[" "].concat(t),e.useCategories.showAll&&(a.range=[0,t.length+1])}return e.spikes&&(a.showspikes=!0,a.spikecolor=t?"#0ff":"#00f",a.spikethickness=t?.5:1,a.spikedash=t?"1px,3px":"2px,3px"),a}})(oePlotly),(function(e){"use strict";e.getLayout=function(t){const a=t.darkTheme;let o={isDark:a,hovermode:"closest",autosize:!0,margin:{l:50,r:50,t:30,b:80,pad:4,autoexpand:!0},paper_bgcolor:a?"rgba(30,46,66,0.5)":"rgba(255,255,255,0.5)",plot_bgcolor:a?"rgb(10,10,30)":"#fff",font:{family:"Roboto, 'Open Sans', verdana, arial, sans-serif",size:11,color:a?"#aaa":"#333"},hoverlabel:{bgcolor:a?"#003":"#fff",bordercolor:a?"#003":"#00f",font:{size:11,color:e.getBlue(a)}}};if(t.colors?o.colorway=e.getColorSeries(t.colors,a):o.colorway=e.getColorSeries("default",a),t.plotTitle&&(o.title={text:t.plotTitle,xref:"paper",yref:"container",x:0,y:1,yanchor:"top",pad:{t:20},font:{size:15}},o.margin.t=50),t.legend){o.showlegend=!0;const e={font:{size:9},itemclick:"toggleothers",orientation:"h",xanchor:"right",yanchor:"bottom",x:1,y:1};"boolean"==typeof t.legend?o.legend=e:o.legend=Object.assign(e,t.legend)}else o.showlegend=!1;if(t.subplot&&(o.grid={rows:t.subplot,columns:1,pattern:"independent"}),o.shapes=[],o.annotations=[],t.vLineLabel){const s=t.vLineLabel.x,n=t.vLineLabel.h,l=(t,o)=>({type:"line",layer:"above",yref:"paper",x0:t.x,y0:0,x1:t.x,y1:n,line:{color:e.getBlue(a),width:.5}}),r=(t,o)=>({showarrow:!1,text:t.name,textangle:90,align:"left",font:{color:e.getBlue(a)},borderpad:2,x:t.x,xshift:8,yref:"paper",y:n});o.shapes=o.shapes.concat(s.map(l)),o.annotations=o.annotations.concat(s.map(r))}if(t.hLineLabel){const s=t.hLineLabel.y,n=t.hLineLabel.axis,l=(t,o)=>({type:"line",layer:"below",xref:"paper",yref:n,x0:0,y0:t.y,x1:1,y1:t.y,line:{color:e.getBlue(a),width:2,dash:"3px,12px"}}),r=(t,o)=>({showarrow:!1,text:t.name,align:"left",font:{color:e.getBlue(a)},borderpad:2,xref:"paper",x:0,yshift:8,yref:n,y:t.y});o.shapes=o.shapes.concat(s.map(l)),o.annotations=o.annotations.concat(s.map(r))}if(t.xaxis&&(o.xaxis=t.xaxis),t.yaxes&&t.yaxes.forEach((e,t)=>{t?o["yaxis"+(t+1)]=e:o.yaxis=e,e.title&&("right"==e.side?o.margin.r=80:o.margin.l=80)}),t.rangeSlider){const e={thickness:.08};a&&(e.bgcolor=o.paper_bgcolor,e.borderwidth=1,e.bordercolor=o.plot_bgcolor),"boolean"!=typeof t.rangeSlider&&(e.range=t.rangeSlider),o.xaxis.rangeslider=e,o.margin.b=15}return t.dateRangeButtons&&(o.xaxis.rangeselector=Object.assign({x:1,xanchor:"right",buttons:[{label:"Show all",step:"all"},{label:"2 Yr",step:"year",count:2},{label:"1 Yr",step:"year",count:1},{label:"6 Mth",step:"month",count:6}]},e.buttonStyling(a))),o}})(oePlotly),(function(e,t){"use strict";e.buildDiv=((e,t,a)=>{const o=document.createElement("div");return o.id=`oePlotly-${e}`,o.style.height=t,o.style.minHeight=a,o}),e.fullDateRange=(()=>({all:[],add(e){this.all=this.all.concat(e),this.all.sort()},firstLast(){let e=this.all.filter(e=>null!==e);return[e[0],e.pop()]}})),e.addClickEvent=((e,a)=>{e.on("plotly_click",(function(e){const o=e.points[0];let s={eye:a,name:o.data.name,index:o.pointIndex,x:o.x,y:o.y};t.customEvent("oePlotlyClick",s),t.log('"oePlotlyClick" Event data: '+JSON.stringify(s))}))}),e.addHoverEvent=((e,a)=>{t.log('"oePlotlyHover" ('+a+") Event available (click point to see data structure)"),e.on("plotly_hover",(function(e){const o=e.points[0];let s={eye:a,name:o.data.name,index:o.pointIndex,x:o.x,y:o.y};t.customEvent("oePlotlyHover",s)}))}),e.dashedLine=(e=>({dash:"2px,2px",width:2})),e.markerFor=(e=>{const t={};switch(e){case"image":t.symbol="triangle-down",t.size=10;break;case"drug":t.symbol="diamond",t.size=8;break;case"injection":t.symbol="star-diamond",t.size=9}return t}),e.eventStyle=(t=>{const a={marker:e.markerFor(t)};switch(t){case"image":a.mode="markers";break;case"drug":a.mode="lines+markers",a.line={width:3};break;case"injection":a.mode="markers"}return a}),e.buttonStyling=(e=>({font:{color:e?"#ccc":"#666"},bgcolor:e?"rgb(30,46,66)":"rgb(255,255,255)",activecolor:e?"rgb(7,69,152)":"rgb(205,205,255)",bordercolor:e?"rgb(10,26,36))":"rgb(255,255,255)",borderwidth:2})),e.addDropDown=(t=>{let a=[];a.push({method:"update",args:["visible",[!0,!1,!1,!1]],label:"Option 1"}),a.push({method:"update",args:[{},{title:"some new title",colorway:e.getColorSeries("default",!0)}],label:"Options Title"});let o=Object.assign({type:"dropdown",xanchor:"left",yanchor:"top",x:0,y:.35,buttons:a},e.buttonStyling());t.updatemenus=[o]})})(oePlotly,bluejay),(function(e){"use strict";e.selectableUnits=(()=>{const t=new Map,a=[];let o,s=0;const n=e=>{s=e.target.selectedIndex;for(const e of t.keys())o(e)};return{init:t=>{o=t.plotlyUpdate;const l=t.darkTheme,r=t.axisDefaults,i=r.title,d=[];t.unitRanges.forEach((t,o)=>{let n;t.makeDefault&&(s=o),d.push(t.option),r.title=`${i} - ${t.option}`,n="number"==typeof t.range[0]?Object.assign({},r,{range:t.range.reverse(),axisType:"linear"}):Object.assign({},r,{useCategories:{showAll:!0,categoryarray:t.range.reverse()}}),a.push(e.getAxis(n,l))}),(e=>{const t=["VA Scale ","<select>","{{#options}}","<option>{{.}}</option>","{{/options}}","</select>"].join(""),a=document.createElement("div");a.className="oesplotly-options",a.innerHTML=Mustache.render(t,{options:e}),a.style.position="absolute",a.style.top="1px",a.style.left="50%",a.style.transform="translateX( -50% )",a.style.zIndex=1;const o=document.querySelector(".oes-v2");o.style.position="relative",o.appendChild(a);let l=a.querySelector("select");l.options[s].selected=!0,l.addEventListener("change",n,!1)})(d)},addTrace:(e,a)=>{t.has(e)?t.get(e).push(a):t.set(e,[a])},selectedTrace:e=>t.get(e)[s],selectedAxis:()=>a[s]}})})(oePlotly),(function(e){"use strict";const t=oePlotly.isDarkTheme(),a=new Map([["right",new Map],["left",new Map]]),o=oePlotly.fullDateRange(),s=oePlotly.selectableUnits(),n=(e,t)=>{const n={x:e.VA.offScale.x,y:e.VA.offScale.y,name:e.VA.offScale.name,hovertemplate:"%{y}<br>%{x}",type:"scatter",mode:"lines+markers"};o.add(e.va.offScale.x);const l={x:e.VFI.x,y:e.VFI.y,name:e.VFI.name,yaxis:"y5",hovertemplate:"%{y}<br>%{x}",type:"scatter",mode:"lines+markers",line:oePlotly.dashedLine()};o.add(e.VFI.x);const r={x:e.IOP.x,y:e.IOP.y,name:e.IOP.name,yaxis:"y3",hovertemplate:"IOP: %{y}<br>%{x}",type:"scatter",mode:"lines+markers"};o.add(e.IOP.x),Object.values(e.VA.units).forEach((e,a)=>{s.addTrace(t,{x:e.x,y:e.y,name:e.name,yaxis:"y2",hovertemplate:e.name+": %{y}<br>%{x}",type:"scatter",mode:"lines+markers"}),a||o.add(e.x)});const i=[];Object.values(e.events).forEach(e=>{let t=e.customdata?"%{y}<br>%{customdata}<br>%{x}":"%{y}<br>%{x}",a=Object.assign({x:e.x,y:e.y,customdata:e.customdata,name:e.name,yaxis:"y4",hovertemplate:t,type:"scatter",showlegend:!1},oePlotly.eventStyle(e.event));i.push(a),o.add(e.x)});const d=[n,l,s.selectedTrace(t),r].concat(i);a.get(t).set("data",d)},l=e=>{let t=a.get(e);t.get("data")[2]=s.selectedTrace(e),t.get("layout").yaxis2=Object.assign({},s.selectedAxis()),Plotly.react(t.get("div"),t.get("data"),t.get("layout"),{displayModeBar:!1,responsive:!0})},r=e=>{const s=e.eye,n=oePlotly.getLayout({darkTheme:t,legend:{traceorder:"reversed",yanchor:"bottom",y:.82},colors:e.colors,plotTitle:e.title,xaxis:e.xaxis,yaxes:e.yaxes,subplot:4,rangeSlider:o.firstLast(),dateRangeButtons:!0,vLineLabel:{x:Object.values(e.procedures),h:.82},hLineLabel:{y:Object.values(e.targetIOP),axis:"y3"}}),r=oePlotly.buildDiv(`Glaucoma-${s}Eye`,"80vh","850px");document.querySelector(e.parentDOM).appendChild(r),a.get(s).set("div",r),a.get(s).set("layout",n),l(s),oePlotly.addClickEvent(r,s),oePlotly.addHoverEvent(r,s),document.addEventListener("oesLayoutChange",()=>{Plotly.relayout(r,n)})};e.extend("plotSummaryGlaucoma",(i=null)=>{if(null===i)return e.log("[oePlotly] - no JSON data provided for Plot.ly Glaucoma ??"),!1;e.log("[oePlotly] - building Plot.ly Glaucoma");const d=[[0,.08],[.1,.45],[.47,.82],[.88,1]];s.init({darkTheme:t,plotlyUpdate:l,axisDefaults:{type:"y",domain:d[1],title:"VA",spikes:!0},unitRanges:Object.values(i.yaxis.unitRanges)}),i.rightEye&&n(i.rightEye,"right"),i.leftEye&&n(i.leftEye,"left");const c=oePlotly.getAxis({type:"x",numTicks:10,useDates:!0,spikes:!0,range:o.firstLast(),noMirrorLines:!0},t),y=oePlotly.getAxis({type:"y",domain:d[0],useCategories:{showAll:!0,categoryarray:i.yaxis.offScale.reverse()},spikes:!0},t),u=oePlotly.getAxis({type:"y",domain:d[2],title:"IOP",range:[0,75],spikes:!0},t),p=oePlotly.getAxis({type:"y",domain:d[3],useCategories:{showAll:!0,categoryarray:i.eventTypes.reverse()},spikes:!0},t),g=oePlotly.getAxis({type:"y",domain:d[1],title:"VFI",range:[-30,5],rightSide:"y2",spikes:!0},t),h=s.selectedAxis();a.has("right")&&r({title:"Right Eye",eye:"right",colors:"rightEye",xaxis:c,yaxes:[y,h,u,p,g],procedures:i.rightEye.procedures,targetIOP:i.rightEye.targetIOP,parentDOM:i.rightEye.dom}),a.has("left")&&r({title:"Left Eye",eye:"left",colors:"leftEye",xaxis:c,yaxes:[y,h,u,p,g],procedures:i.leftEye.procedures,targetIOP:i.leftEye.targetIOP,parentDOM:i.leftEye.dom})})})(bluejay),(function(e){"use strict";const t=oePlotly.isDarkTheme(),a=new Map([["right",new Map],["left",new Map]]),o=oePlotly.fullDateRange(),s=oePlotly.selectableUnits(),n=(e,t)=>{const n={x:e.CRT.x,y:e.CRT.y,name:e.CRT.name,hovertemplate:"CRT: %{y}<br>%{x}",type:"scatter",mode:"lines+markers",line:oePlotly.dashedLine()};o.add(e.CRT.x),Object.values(e.VA.units).forEach((e,a)=>{s.addTrace(t,{x:e.x,y:e.y,name:e.name,yaxis:"y2",hovertemplate:e.name+": %{y}<br>%{x}",type:"scatter",mode:"lines+markers"}),a||o.add(e.x)});const l=[];Object.values(e.events).forEach(e=>{let t=e.customdata?"%{y}<br>%{customdata}<br>%{x}":"%{y}<br>%{x}",a=Object.assign({x:e.x,y:e.y,customdata:e.customdata,name:e.name,yaxis:"y3",hovertemplate:t,type:"scatter",showlegend:!1},oePlotly.eventStyle(e.event));l.push(a),o.add(e.x)});const r=[n,s.selectedTrace(t)].concat(l);a.get(t).set("data",r)},l=e=>{let t=a.get(e);t.get("data")[1]=s.selectedTrace(e),t.get("layout").yaxis2=Object.assign({},s.selectedAxis()),Plotly.react(t.get("div"),t.get("data"),t.get("layout"),{displayModeBar:!1,responsive:!0})},r=e=>{const s=e.eye,n=oePlotly.getLayout({darkTheme:t,legend:{yanchor:"bottom",y:.8},colors:e.colors,plotTitle:e.title,xaxis:e.xaxis,yaxes:e.yaxes,subplot:2,rangeSlider:o.firstLast(),dateRangeButtons:!0}),r=oePlotly.buildDiv(`Medical Retina-${e.eye}Eye`,"80vh","600px");document.querySelector(e.parentDOM).appendChild(r),a.get(s).set("div",r),a.get(s).set("layout",n),l(s),oePlotly.addClickEvent(r,e.eye),oePlotly.addHoverEvent(r,s),document.addEventListener("oesLayoutChange",()=>{Plotly.relayout(r,n)})};e.extend("plotSummaryMedicalRetina",(i=null)=>{if(null===i)return e.log("[oePlotly] - no JSON data provided for Plot.ly Medical Retina ??"),!1;e.log("[oePlotly] - building Plot.ly Medical Retina");const d=[[0,.08],[.1,.8],[.88,1]];s.init({darkTheme:t,plotlyUpdate:l,axisDefaults:{type:"y",rightSide:"y1",domain:d[1],title:"VA",spikes:!0},unitRanges:Object.values(i.yaxis.unitRanges)}),i.rightEye&&n(i.rightEye,"right"),i.leftEye&&n(i.leftEye,"left");const c=oePlotly.getAxis({type:"x",numTicks:10,useDates:!0,range:o.firstLast(),spikes:!0},t),y=oePlotly.getAxis({type:"y",domain:d[1],title:"CRT",range:[200,650],spikes:!0},t),u=oePlotly.getAxis({type:"y",domain:d[2],useCategories:{showAll:!0,categoryarray:i.eventTypes.reverse()},spikes:!0},t),p=s.selectedAxis();a.has("right")&&r({title:"Right Eye",eye:"right",colors:"rightEye",xaxis:c,yaxes:[y,p,u],parentDOM:".oes-left-side"}),a.has("left")&&r({title:"Left Eye",eye:"left",colors:"leftEye",xaxis:c,yaxes:[y,p,u],parentDOM:".oes-right-side"})})})(bluejay),(function(e){"use strict";e.addModule("collapseExpand");const t=[],a=()=>({show:function(){e.show(this.content,"block"),this.btn.classList.replace("expand","collapse"),this.open=!0}}),o=()=>({hide:function(){e.hide(this.content),this.btn.classList.replace("collapse","expand"),this.open=!1}}),s=e=>Object.assign(e,{change:function(){this.open?this.hide():this.show()}},a(),o()),n=(a,o)=>{let n=a.target,l=e.getDataAttr(n);if(l)t[parseFloat(l)].change();else{e.setDataAttr(n,t.length);let a={btn:n,content:n.parentNode.querySelector(".collapse-"+o+"-content"),open:n.classList.contains("collapse")},l=s(a);l.change(),t.push(l)}};e.userDown(".collapse-data-header-icon",e=>n(e,"data")),e.userDown(".collapse-group > .header-icon",e=>n(e,"group"))})(bluejay),(function(e){"use strict";const t=e.nodeArray(document.querySelectorAll(".hidden"));t.length&&t.forEach(t=>{e.hide(t),t.classList.remove("hidden")});const a=e.nodeArray(document.querySelectorAll(".tr-collapse"));a.length&&a.forEach(e=>{e.style.visibility="collapse",e.classList.remove("tr-collapse")})})(bluejay),(function(e){"use strict";e.addModule("tooltip");const t={selector:".js-has-tooltip",css:{basicWidth:200,bilateralWidth:400},showing:!1,target:null,type:"basic",tip:null,eyeIcons:null,onChange(e){if("function"!=typeof e)throw new Error("Tooltip Model requires View callback as funciton");this.onChange=e},reset(){this.showing=!1,this.target=null,this.onChange()},update(e){this.showing=!0,this.target=e,"bilateral"==e.dataset.ttType?(this.type="bilateral",this.eyeIcons="no"!==e.dataset.ttEyeicons,this.tip={r:e.dataset.ttRight,l:e.dataset.ttLeft}):(this.type="basic",this.tip=e.dataset.tooltipContent),this.onChange()}},a=((t=>{let a,o=null,s="block",n=t.css.basicWidth,l=window.innerWidth;e.listenForResize(()=>l=window.innerWidth);const r=()=>{o.innerHTML="",o.className="oe-tooltip",o.style.cssText="display:none"},i=()=>{o=o||(()=>(o=document.createElement("div"),e.appendTo("body",o),r(),o))(),"block"==s?o.innerHTML=t.tip:(o.classList.add("bilateral"),t.eyeIcons||o.classList.add("no-icons"),o.innerHTML='<div class="right"></div><div class="left"></div>',o.querySelector(".right").innerHTML=t.tip.r,o.querySelector(".left").innerHTML=t.tip.l);let a=n/2,i=e.getHiddenElemSize(o).h,d=t.target.getBoundingClientRect(),c=d.right-d.width/2,y=d.top-i-8,u=e.settings("cssHotlistFixed"),p=l>u?u:l;c<=a&&(a=20,o.classList.add("offset-right")),c>p-a&&(a=n-20,o.classList.add("offset-left")),d.top<i&&(y=d.bottom+8,o.classList.add("inverted")),o.style.top=y+"px",o.style.left=c-a+"px",o.style.display=s};t.onChange(()=>{0==t.showing?r():(a=t.tip,"basic"==t.type?(s="block",n=t.css.basicWidth):(s="flex",n=t.css.bilateralWidth),i())})})(t),e=>{t.update(e.target),window.addEventListener("scroll",o,{capture:!0,once:!0})}),o=e=>{t.showing&&t.reset()};e.userDown(t.selector,e=>{e.target.isSameNode(t.target)&&t.showing?o():a(e)}),e.userEnter(t.selector,a),e.userLeave(t.selector,o)})(bluejay),(function(e){"use strict";Object.preventExtensions(e),e.ready()})(bluejay);