Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);const bluejay=(function(){"use strict";const e={};let t=1;return e.extend=((n,o)=>o.id||n in e?(bluejay.log('** Err: Can not extend again: "'+n+'"'),!1):(bluejay.log("method: "+n+"()"),o.id=t++,e[n]=o,!0)),e.log=function(e){console.log("[bluejay] "+e)},e.log("OE JS UI layer... Setting up"),e})();!(function(e){"use strict";const t={click:[],hover:[],exit:[],scroll:[],resize:[],update:[]};e.extend("registerForHover",(e,n)=>t.hover.push({selector:e,cb:n})),e.extend("registerForClick",(e,n)=>t.click.push({selector:e,cb:n})),e.extend("registerForExit",(e,n)=>t.exit.push({selector:e,cb:n})),e.extend("listenForScroll",e=>t.scroll.push({cb:e})),e.extend("listenForResize",e=>t.resize.push({cb:e})),e.extend("listenForDomChange",e=>t.update.push({cb:e}));const n=(e,t)=>{t.target!==document&&e.forEach(e=>{t.target.matches(e.selector)&&e.cb(t)})},o={fire:!0,timerID:0,throttleEvent:function(e){this.fire&&(this.fire=!1,this.broadcast(e),this.timerID=setTimeout(()=>{clearTimeout(this.timerID),this.fire=!0},320))},broadcast:function(e){e.forEach(e=>{e.cb(event)})}};e.extend("onClickEvent",e=>n(t.click,e)),e.extend("onHoverEvent",e=>n(t.hover,e)),e.extend("onExitEvent",e=>n(t.exit,e)),e.extend("onWindowScroll",()=>o.throttleEvent(t.scroll)),e.extend("onWindowResize",()=>o.throttleEvent(t.resize)),e.extend("onDomUpdate",()=>{t.udpate.forEach(e=>{e.cb(event)})})})(bluejay),(function(e){"use strict";bluejay.extend("triggerCustomEvent",(e,t)=>{e="oeui-"+e;const n=new CustomEvent(e,{detail:t});document.dispatchEvent(n),bluejay.log('[Custom Event] - "'+e+'"')})})(),(function(e){"use strict";e.extend("nodeArray",e=>Array.prototype.slice.call(e)),e.extend("appendTo",(e,t,n)=>{(n||document).querySelector(e).appendChild(t)}),e.extend("removeElement",e=>{e.parentNode.removeChild(e)}),e.extend("xhr",(t,n)=>{e.log("[XHR] - "+t);let o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)return o.status>=200&&o.status<300?(e.log("[XHR] - Success"),void n(o.responseText)):(e.log("[XHR] - Failed"),!1)},o.open("GET",t),o.send()}),e.extend("getHiddenElemSize",e=>{e.style.visibility="hidden",e.style.display="block";let t={w:e.offsetWidth,h:e.offsetHeight};return e.style.visibility="inherit",e.style.display="none",t})})(bluejay),(function(e){"use strict";let t=bluejay.nodeArray(document.querySelectorAll(".hidden"));t.length<1||t.forEach(e=>{e.style.display="none",e.classList.remove("hidden")})})(),(function(e){"use strict";const t={};e.extend("addModule",(n,o)=>n in t?(e.log("** Err: Module aleady added? "+n),!1):(e.log("[Module] "+n),t[n]={},t[n])),e.extend("getModule",n=>{if(n in t)return t[n];e.log("Module does not exist?: "+n)})})(bluejay),(function(e){"use strict";const t={css:{extendedBrowserSize:1440,browserHotlistFixSize:1890}};e.extend("getSetting",(function(e){return t[e]})),e.extend("getDataAttributeName",(e=!1)=>{return!1===e?"oeui":"oeui-"+e})})(bluejay),(function(e){"use strict";e.addModule("tooltip");const t="oe-tooltip";let n=!1,o=window.innerWidth,l=document.createElement("div");l.className=t,l.style.display="none",e.appendTo("body",l);const i=t=>{if(n)return;n=!0;const i=t.target;l.innerHTML=i.dataset.tooltipContent;let s=100,a="",r=e.getHiddenElemSize(l).h,c=i.getBoundingClientRect(),d=c.right-c.width/2,u=c.top-r-8+"px",h=e.getSetting("css").extendedBrowserSize;d<=s?(s=20,a="offset-right"):d>(o>h?h:o)-s&&(s=180,a="offset-left"),c.top<r&&(u=c.bottom+8+"px",a="inverted"),l.className=a.tooltip+" "+a,l.style.top=u,l.style.left=d-s+"px",l.style.display="block"},s=e=>{n&&(n=!1,l.innerHTML="",l.className=t,l.style.cssText="display:none")};e.registerForClick(".js-has-tooltip",e=>n?s(e):i(e)),e.registerForHover(".js-has-tooltip",i),e.registerForExit(".js-has-tooltip",s),e.listenForScroll(s),e.listenForResize(()=>o=window.innerWidth)})(bluejay),(function(e){"use strict";e.addModule("attachmentThumbnail");const t="oe-attachment-thumbnail";let n,o=!1;if(e.nodeArray(document.querySelectorAll("."+t)).length<1)return;const l=()=>{e.removeElement(n),o=!1},i=t=>{o||(t=>{o=!0,(n=document.createElement("div")).className="oe-popup-wrap";let i='<div class="oe-popup-attachment">';if(i+='<div class="title">'+t.title+"</div>",i+='<div class="close-icon-btn"><i class="oe-i remove-circle pro-theme"></i></div>',i+='<div class="file-attachment-content"></div>',i+='<div class="file-size-controls"></div>',i+="</div>",n.innerHTML=i,t.stack){let o=document.createElement("div");o.className="attachment-stack";let l=t.title.split(" - "),i="Timeline: <select>";i+="<option>"+t.title+"</option>";for(let e=t.stack;e;e--)i+="<option>"+l[0]+" - ("+e+" Jan 1975 09:30)</option>";i+="</select>",o.innerHTML=i,e.appendTo(".oe-popup-attachment",o,n)}let s=n.querySelector(".file-attachment-content"),a=n.querySelector(".file-size-controls"),r='<button id="oe-att-fit" class="pro-theme selected">Fit to screen</button>';if(r+='<button id="oe-att-actual" class="pro-theme">Actual Size</button>',"pdf"==t.type&&(r='<button class="pro-theme selected">PDF</button>'),t.annotate){s.classList.add("annotation");let o=document.createElement("div");o.className="attachment-annotation",e.appendTo(".oe-popup-attachment",o,n),r+='<button class="green hint">Save annotations</button>',e.xhr(t.idgPHP,e=>{o.innerHTML=e,"L"==t.eyelat&&(o.querySelector("#annotation-right").style.visibility="hidden"),"R"==t.eyelat&&(o.querySelector("#annotation-left").style.visibility="hidden")})}if(a.innerHTML=r,"png"===t.type){s.style.backgroundImage="url('"+t.file+"')",s.innerHTML='<img src="'+t.file+'" style="display:none"/>';let e=n.querySelector("#oe-att-fit"),o=n.querySelector("#oe-att-actual"),l=n.querySelector("img");const i=(e,t,n,o)=>{s.style.backgroundImage=e,l.style.display=t,n.classList.add("selected"),o.classList.remove("selected")};o.addEventListener("mousedown",t=>{t.stopPropagation(),i("none","block",o,e)}),e.addEventListener("mousedown",n=>{n.stopPropagation(),i("url('"+t.file+"')","none",e,o)})}else s.innerHTML='<embed src="'+t.file+'" width="100%" height="100%"></embed>';n.querySelector(".close-icon-btn").addEventListener("mousedown",()=>l(),{once:!0}),e.appendTo("body",n)})(JSON.parse(t.target.dataset.attachment))};e.registerForClick("."+t,i),document.querySelectorAll(".js-annotate-attachment")&&e.registerForClick(".js-annotate-attachment",i)})(bluejay),(function(e){"use strict";e.addModule("collapseData");const t="collapse-data-header-icon",n="collapse-data-content",o=e.getDataAttributeName();let l=[];function i(e,t){this.btn=e,this.content=t,this.collapsed=!0}i.prototype.change=function(){this.collapsed?(this.content.style.display="block",this.btn.className=t+" collapse",e.triggerCustomEvent("collapse-data-revealed",{content:this.content})):(this.content.style.display="none",this.btn.className=t+" expand"),this.collapsed=!this.collapsed};(()=>{let s=e.nodeArray(document.querySelectorAll(".collapse-data"));s.length<1||s.forEach(e=>{!1===e.hasAttribute("data-"+o)&&(e.setAttribute("data-"+o,l.length),l.push(new i(e.querySelector("."+t),e.querySelector("."+n))))})})(),e.registerForClick("."+t,e=>{console.log(e.target);let t=e.target.parentNode.dataset[o];l[t].change()})})(bluejay),(function(e){"use strict";e.addModule("restrictDataHeightFlag");const t="restrict-data-shown-flag",n=e.getDataAttributeName(),o=[];function l(e,t,n){this.hasScrolled=!1,this.flag=e,this.content=t,this.scrollEndPos=n,this.content.addEventListener("scroll",()=>this.scroll(),{once:!0})}l.prototype.scroll=function(t){this.hasScrolled=!0,this.flag.className+=" fade-out",setTimeout(()=>e.removeElement(this.flag),400)},l.prototype.userClick=function(){this.hasScrolled||i(this.content,this.scrollEndPos)};const i=(e,t)=>{let n=1,o=0,l=setInterval(()=>{o=Math.min(1,n/200),e.scrollTop=Math.ceil((e=>e*(2-e))(o)*t),n+=1,1==o&&clearInterval(l)},2)};(()=>{let i=e.nodeArray(document.querySelectorAll(".restrict-data-shown"));if(i.length<1)return;const s=document.createDocumentFragment(),a=document.createElement("div");a.className=t,s.appendChild(a),i.forEach(e=>{let t=e.querySelector(".restrict-data-content"),i=e.clientHeight,a=t.scrollHeight;if(a>i&&0===t.scrollTop){let r=s.cloneNode(!0),c=r.firstChild;c.setAttribute("data-"+n,o.length),e.appendChild(r),o.push(new l(c,t,a-i))}})})(),e.registerForClick("."+t,e=>{o[e.target.getAttribute("data-"+n)].userClick()})})(bluejay),(function(e){"use strict";document.addEventListener("mouseenter",e.onHoverEvent,!0),document.addEventListener("mousedown",e.onClickEvent,!1),document.addEventListener("mouseleave",e.onExitEvent,!0),window.addEventListener("scroll",e.onWindowScroll,!0),window.onresize=e.onWindowResize})(bluejay);